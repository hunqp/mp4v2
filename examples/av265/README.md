# 将 H.264 封装为 MP4 文件

## 编译

```
paul@vmware:~/gitee/mp4v2/mp4v2-h265-study/examples/av265$ make
gcc -I./inc -g -c src/main.c -o src/main.o
gcc src/main.o -I./inc -g -L./lib -lmp4v2 -o av265
strip av265
paul@vmware:~/gitee/mp4v2/mp4v2-h265-study/examples/av265$ 
```

## 执行

```
paul@vmware:~/gitee/mp4v2/mp4v2-h265-study/examples/av265$ ./av265 m265.bin 
=========> delete file 
[0134][maz_split] 0x15/0x88
[0152][maz_split] [0001] type:0 len:768
[0152][maz_split] [0002] type:1 len:28
[0210][maz_split] add the video track
[0152][maz_split] [0003] type:1 len:45
[0152][maz_split] [0004] type:1 len:11
[0152][maz_split] [0005] type:0 len:768
[0152][maz_split] [0006] type:1 len:21291
[0152][maz_split] [0007] type:1 len:2488
[0152][maz_split] [0008] type:1 len:1299
[0152][maz_split] [0009] type:0 len:768
[0152][maz_split] [0010] type:1 len:1031
[0152][maz_split] [0011] type:1 len:2641
[0152][maz_split] [0012] type:1 len:1577
[0152][maz_split] [0013] type:0 len:768
[0152][maz_split] [0014] type:1 len:1597
[0152][maz_split] [0015] type:1 len:1454
[0152][maz_split] [0016] type:1 len:1714
[0152][maz_split] [0017] type:0 len:768
[0152][maz_split] [0018] type:1 len:2425
[0152][maz_split] [0019] type:1 len:1230
[0152][maz_split] [0020] type:1 len:1144
[0152][maz_split] [0021] type:0 len:768
[0152][maz_split] [0022] type:1 len:1056
[0152][maz_split] [0023] type:1 len:1854
[0152][maz_split] [0024] type:1 len:2021
[0152][maz_split] [0025] type:0 len:768
[0152][maz_split] [0026] type:1 len:869
[0152][maz_split] [0027] type:1 len:1246
[0152][maz_split] [0028] type:1 len:1118
[0152][maz_split] [0029] type:0 len:768
[0152][maz_split] [0030] type:1 len:1066
[0152][maz_split] [0031] type:1 len:2330
[0152][maz_split] [0032] type:1 len:1328
[0152][maz_split] [0033] type:1 len:1751
[0152][maz_split] [0034] type:0 len:768
[0152][maz_split] [0035] type:1 len:1602
[0152][maz_split] [0036] type:1 len:1421
[0152][maz_split] [0037] type:1 len:1467
[0152][maz_split] [0038] type:0 len:768
[0152][maz_split] [0039] type:1 len:28
[0152][maz_split] [0040] type:1 len:45
[0152][maz_split] [0041] type:1 len:11
[0152][maz_split] [0042] type:0 len:768
[0152][maz_split] [0043] type:1 len:9662
[0152][maz_split] [0044] type:1 len:1728
[0152][maz_split] [0045] type:1 len:1693
[0152][maz_split] [0046] type:0 len:768
[0152][maz_split] [0047] type:1 len:1493
[0152][maz_split] [0048] type:1 len:1972
[0152][maz_split] [0049] type:1 len:1479
[0152][maz_split] [0050] type:0 len:768
[0152][maz_split] [0051] type:1 len:1500
[0152][maz_split] [0052] type:1 len:1517
[0152][maz_split] [0053] type:1 len:1214
[0152][maz_split] [0054] type:0 len:768
[0152][maz_split] [0055] type:1 len:1995
[0152][maz_split] [0056] type:1 len:1137
[0152][maz_split] [0057] type:1 len:1139
[0152][maz_split] [0058] type:0 len:768
[0152][maz_split] [0059] type:1 len:1419
[0152][maz_split] [0060] type:1 len:1190
[0152][maz_split] [0061] type:1 len:2347
[0152][maz_split] [0062] type:0 len:768
[0152][maz_split] [0063] type:1 len:902
[0152][maz_split] [0064] type:1 len:1367
[0152][maz_split] [0065] type:1 len:2169
[0152][maz_split] [0066] type:1 len:1065
[0152][maz_split] [0067] type:0 len:768
[0152][maz_split] [0068] type:1 len:1991
[0152][maz_split] [0069] type:1 len:1070
[0152][maz_split] [0070] type:1 len:2757
[0152][maz_split] [0071] type:0 len:768
[0152][maz_split] [0072] type:1 len:1024
[0152][maz_split] [0073] type:1 len:2480
[0152][maz_split] [0074] type:1 len:851
[0152][maz_split] [0075] type:0 len:768
[0152][maz_split] [0076] type:1 len:28
[0152][maz_split] [0077] type:1 len:45
[0152][maz_split] [0078] type:1 len:11
[0152][maz_split] [0079] type:0 len:768
[0152][maz_split] [0080] type:1 len:16644
[0152][maz_split] [0081] type:1 len:1921
[0152][maz_split] [0082] type:1 len:1636
[0152][maz_split] [0083] type:0 len:768
[0152][maz_split] [0084] type:1 len:1723
[0152][maz_split] [0085] type:1 len:1360
[0152][maz_split] [0086] type:1 len:1094
[0152][maz_split] [0087] type:0 len:768
[0152][maz_split] [0088] type:1 len:2111
[0152][maz_split] [0089] type:1 len:2045
[0152][maz_split] [0090] type:1 len:1439
[0152][maz_split] [0091] type:0 len:768
[0152][maz_split] [0092] type:1 len:1928
[0152][maz_split] [0093] type:1 len:1697
[0152][maz_split] [0094] type:1 len:1513
[0152][maz_split] [0095] type:0 len:768
[0152][maz_split] [0096] type:1 len:1431
[0152][maz_split] [0097] type:1 len:1670
[0152][maz_split] [0098] type:1 len:1389
[0152][maz_split] [0099] type:1 len:1266
[0152][maz_split] [0100] type:0 len:768
[0152][maz_split] [0101] type:1 len:1472
[0152][maz_split] [0102] type:1 len:1512
[0152][maz_split] [0103] type:1 len:1697
[0152][maz_split] [0104] type:0 len:768
[0152][maz_split] [0105] type:1 len:1448
[0152][maz_split] [0106] type:1 len:1278
[0152][maz_split] [0107] type:1 len:1376
[0152][maz_split] [0108] type:0 len:768
[0152][maz_split] [0109] type:1 len:1445
[0152][maz_split] [0110] type:1 len:1552
[0152][maz_split] [0111] type:1 len:1556
[0152][maz_split] [0112] type:0 len:768
[0152][maz_split] [0113] type:1 len:28
[0152][maz_split] [0114] type:1 len:45
[0152][maz_split] [0115] type:1 len:11
[0152][maz_split] [0116] type:0 len:768
[0152][maz_split] [0117] type:1 len:19100
[0152][maz_split] [0118] type:1 len:2375
[0152][maz_split] [0119] type:1 len:1247
[0152][maz_split] [0120] type:0 len:768
[0152][maz_split] [0121] type:1 len:1859
[0152][maz_split] [0122] type:1 len:1675
[0152][maz_split] [0123] type:1 len:1488
[0152][maz_split] [0124] type:0 len:768
[0152][maz_split] [0125] type:1 len:1606
[0152][maz_split] [0126] type:1 len:1601
[0152][maz_split] [0127] type:1 len:1817
[0152][maz_split] [0128] type:0 len:768
[0152][maz_split] [0129] type:1 len:1468
[0152][maz_split] [0130] type:1 len:1296
[0152][maz_split] [0131] type:1 len:1490
[0152][maz_split] [0132] type:1 len:1358
[0152][maz_split] [0133] type:0 len:768
[0152][maz_split] [0134] type:1 len:1480
[0152][maz_split] [0135] type:1 len:1217
[0152][maz_split] [0136] type:1 len:2389
[0152][maz_split] [0137] type:0 len:768
[0152][maz_split] [0138] type:1 len:1482
[0152][maz_split] [0139] type:1 len:1424
[0152][maz_split] [0140] type:1 len:1319
[0152][maz_split] [0141] type:0 len:768
[0152][maz_split] [0142] type:1 len:1408
[0152][maz_split] [0143] type:1 len:1265
[0152][maz_split] [0144] type:1 len:1374
[0152][maz_split] [0145] type:0 len:768
[0152][maz_split] [0146] type:1 len:1224
[0152][maz_split] [0147] type:1 len:1269
[0152][maz_split] [0148] type:1 len:1143
[0152][maz_split] [0149] type:0 len:768
[0152][maz_split] [0150] type:1 len:28
[0152][maz_split] [0151] type:1 len:45
[0152][maz_split] [0152] type:1 len:11
[0152][maz_split] [0153] type:0 len:768
[0152][maz_split] [0154] type:1 len:21588
[0152][maz_split] [0155] type:1 len:3199
[0152][maz_split] [0156] type:1 len:1032
[0152][maz_split] [0157] type:0 len:768
[0152][maz_split] [0158] type:1 len:1705
[0152][maz_split] [0159] type:1 len:1208
[0152][maz_split] [0160] type:1 len:2015
[0152][maz_split] [0161] type:0 len:768
[0152][maz_split] [0162] type:1 len:1434
[0152][maz_split] [0163] type:1 len:1310
[0152][maz_split] [0164] type:1 len:1056
[0152][maz_split] [0165] type:1 len:1539
[0152][maz_split] [0166] type:0 len:768
[0152][maz_split] [0167] type:1 len:1287
[0152][maz_split] [0168] type:1 len:1333
[0152][maz_split] [0169] type:1 len:1398
[0152][maz_split] [0170] type:0 len:768
[0152][maz_split] [0171] type:1 len:1362
[0152][maz_split] [0172] type:1 len:1289
[0152][maz_split] [0173] type:1 len:1186
[0152][maz_split] [0174] type:0 len:768
[0152][maz_split] [0175] type:1 len:2336
[0152][maz_split] [0176] type:1 len:1393
[0152][maz_split] [0177] type:1 len:1288
[0152][maz_split] [0178] type:0 len:768
[0152][maz_split] [0179] type:1 len:1431
[0152][maz_split] [0180] type:1 len:1057
[0152][maz_split] [0181] type:1 len:1360
[0152][maz_split] [0182] type:0 len:768
[0152][maz_split] [0183] type:1 len:1282
[0152][maz_split] [0184] type:1 len:1740
[0152][maz_split] [0185] type:1 len:1896
[0152][maz_split] [0186] type:0 len:768
[0152][maz_split] [0187] type:1 len:28
[0152][maz_split] [0188] type:1 len:45
[0152][maz_split] [0189] type:1 len:11
[0152][maz_split] [0190] type:0 len:768
[0152][maz_split] [0191] type:1 len:18996
[0152][maz_split] [0192] type:1 len:2674
[0152][maz_split] [0193] type:1 len:1286
[0152][maz_split] [0194] type:0 len:768
[0152][maz_split] [0195] type:1 len:1059
[0152][maz_split] [0196] type:1 len:1837
[0152][maz_split] [0197] type:1 len:1565
[0152][maz_split] [0198] type:1 len:1603
[0152][maz_split] [0199] type:0 len:768
[0152][maz_split] [0200] type:1 len:1720
[0152][maz_split] [0201] type:1 len:1600
[0152][maz_split] [0202] type:1 len:829
[0152][maz_split] [0203] type:0 len:768
[0152][maz_split] [0204] type:1 len:1225
[0152][maz_split] [0205] type:1 len:1337
[0152][maz_split] [0206] type:1 len:1357
[0152][maz_split] [0207] type:0 len:768
[0152][maz_split] [0208] type:1 len:1254
[0152][maz_split] [0209] type:1 len:1367
[0152][maz_split] [0210] type:1 len:1132
[0152][maz_split] [0211] type:0 len:768
[0152][maz_split] [0212] type:1 len:1402
[0152][maz_split] [0213] type:1 len:1313
[0152][maz_split] [0214] type:1 len:1291
[0152][maz_split] [0215] type:0 len:768
[0152][maz_split] [0216] type:1 len:1168
[0152][maz_split] [0217] type:1 len:1197
[0152][maz_split] [0218] type:1 len:1343
[0152][maz_split] [0219] type:0 len:768
[0152][maz_split] [0220] type:1 len:1142
[0152][maz_split] [0221] type:1 len:1214
[0152][maz_split] [0222] type:1 len:1172
[0152][maz_split] [0223] type:0 len:768
[0152][maz_split] [0224] type:1 len:28
[0152][maz_split] [0225] type:1 len:45
[0152][maz_split] [0226] type:1 len:11
[0152][maz_split] [0227] type:0 len:768
[0152][maz_split] [0228] type:1 len:21481
[0152][maz_split] [0229] type:1 len:2998
[0152][maz_split] [0230] type:1 len:999
[0152][maz_split] [0231] type:1 len:1497
[0152][maz_split] [0232] type:0 len:768
[0152][maz_split] [0233] type:1 len:1524
[0152][maz_split] [0234] type:1 len:1332
[0152][maz_split] [0235] type:1 len:1345
[0152][maz_split] [0236] type:0 len:768
[0152][maz_split] [0237] type:1 len:1350
[0152][maz_split] [0238] type:1 len:1477
[0152][maz_split] [0239] type:1 len:1463
[0152][maz_split] [0240] type:0 len:768
[0152][maz_split] [0241] type:1 len:1118
[0152][maz_split] [0242] type:1 len:2207
[0152][maz_split] [0243] type:1 len:1195
[0152][maz_split] [0244] type:0 len:768
[0152][maz_split] [0245] type:1 len:1306
[0152][maz_split] [0246] type:1 len:1260
[0152][maz_split] [0247] type:1 len:2150
[0152][maz_split] [0248] type:0 len:768
[0152][maz_split] [0249] type:1 len:1294
[0152][maz_split] [0250] type:1 len:1314
[0152][maz_split] [0251] type:1 len:1443
[0152][maz_split] [0252] type:0 len:768
[0152][maz_split] [0253] type:1 len:1324
[0152][maz_split] [0254] type:1 len:1109
[0152][maz_split] [0255] type:1 len:1272
[0152][maz_split] [0256] type:0 len:768
[0152][maz_split] [0257] type:1 len:1306
[0152][maz_split] [0258] type:1 len:1224
[0152][maz_split] [0259] type:1 len:1215
[0152][maz_split] [0260] type:0 len:768
[0152][maz_split] [0261] type:1 len:28
[0152][maz_split] [0262] type:1 len:45
[0152][maz_split] [0263] type:1 len:11
[0152][maz_split] [0264] type:1 len:21604
[0152][maz_split] [0265] type:0 len:768
[0152][maz_split] [0266] type:1 len:2871
[0152][maz_split] [0267] type:1 len:1102
[0152][maz_split] [0268] type:1 len:1413
[0152][maz_split] [0269] type:0 len:768
[0152][maz_split] [0270] type:1 len:1495
[0152][maz_split] [0271] type:1 len:1156
[0152][maz_split] [0272] type:1 len:1318
[0152][maz_split] [0273] type:0 len:768
[0152][maz_split] [0274] type:1 len:1269
[0152][maz_split] [0275] type:1 len:2422
[0152][maz_split] [0276] type:1 len:1464
[0152][maz_split] [0277] type:0 len:768
[0152][maz_split] [0278] type:1 len:1221
[0152][maz_split] [0279] type:1 len:1379
[0152][maz_split] [0280] type:1 len:1207
[0152][maz_split] [0281] type:0 len:768
[0152][maz_split] [0282] type:1 len:1239
[0152][maz_split] [0283] type:1 len:1179
[0152][maz_split] [0284] type:1 len:1180
[0152][maz_split] [0285] type:0 len:768
[0152][maz_split] [0286] type:1 len:1247
[0152][maz_split] [0287] type:1 len:1304
[0152][maz_split] [0288] type:1 len:1319
[0152][maz_split] [0289] type:0 len:768
[0152][maz_split] [0290] type:1 len:1247
[0152][maz_split] [0291] type:1 len:1223
[0152][maz_split] [0292] type:1 len:1241
[0152][maz_split] [0293] type:0 len:768
[0152][maz_split] [0294] type:1 len:1251
[0152][maz_split] [0295] type:1 len:1142
[0152][maz_split] [0296] type:1 len:1240
[0152][maz_split] [0297] type:1 len:28
[0152][maz_split] [0298] type:0 len:768
[0152][maz_split] [0299] type:1 len:45
[0152][maz_split] [0300] type:1 len:11
[0152][maz_split] [0301] type:1 len:21577
[0152][maz_split] [0302] type:0 len:768
[0152][maz_split] [0303] type:1 len:2988
[0152][maz_split] [0304] type:1 len:1112
[0152][maz_split] [0305] type:1 len:860
[0152][maz_split] [0306] type:0 len:768
[0152][maz_split] [0307] type:1 len:1499
[0152][maz_split] [0308] type:1 len:1267
[0152][maz_split] [0309] type:1 len:1272
[0152][maz_split] [0310] type:0 len:768
[0152][maz_split] [0311] type:1 len:2331
[0152][maz_split] [0312] type:1 len:1617
[0152][maz_split] [0313] type:1 len:1429
[0152][maz_split] [0314] type:0 len:768
[0152][maz_split] [0315] type:1 len:1077
[0152][maz_split] [0316] type:1 len:1250
[0152][maz_split] [0317] type:1 len:1198
[0152][maz_split] [0318] type:0 len:768
[0152][maz_split] [0319] type:1 len:1326
[0152][maz_split] [0320] type:1 len:1166
[0152][maz_split] [0321] type:1 len:899
[0152][maz_split] [0322] type:0 len:768
[0152][maz_split] [0323] type:1 len:2134
[0152][maz_split] [0324] type:1 len:1389
[0152][maz_split] [0325] type:1 len:1290
[0152][maz_split] [0326] type:0 len:768
[0152][maz_split] [0327] type:1 len:1249
[0152][maz_split] [0328] type:1 len:1009
[0152][maz_split] [0329] type:1 len:1141
[0152][maz_split] [0330] type:1 len:1211
[0152][maz_split] [0331] type:0 len:768
[0152][maz_split] [0332] type:1 len:1226
[0152][maz_split] [0333] type:1 len:1254
[0152][maz_split] [0334] type:1 len:28
[0152][maz_split] [0335] type:0 len:768
[0152][maz_split] [0336] type:1 len:45
[0152][maz_split] [0337] type:1 len:11
[0152][maz_split] [0338] type:1 len:21510
[0152][maz_split] [0339] type:0 len:768
[0152][maz_split] [0340] type:1 len:3129
[0152][maz_split] [0341] type:1 len:1101
[0152][maz_split] [0342] type:1 len:1232
[0152][maz_split] [0343] type:0 len:768
[0152][maz_split] [0344] type:1 len:1704
[0152][maz_split] [0345] type:1 len:799
[0152][maz_split] [0346] type:1 len:1662
[0152][maz_split] [0347] type:0 len:768
[0152][maz_split] [0348] type:1 len:1728
[0152][maz_split] [0349] type:1 len:2272
[0152][maz_split] [0350] type:1 len:1178
[0152][maz_split] [0351] type:0 len:768
[0152][maz_split] [0352] type:1 len:1052
[0152][maz_split] [0353] type:1 len:2007
[0152][maz_split] [0354] type:1 len:1309
[0152][maz_split] [0355] type:0 len:768
[0152][maz_split] [0356] type:1 len:2030
[0152][maz_split] [0357] type:1 len:1011
[0152][maz_split] [0358] type:1 len:1962
[0152][maz_split] [0359] type:0 len:768
[0152][maz_split] [0360] type:1 len:1281
[0152][maz_split] [0361] type:1 len:1098
[0152][maz_split] [0362] type:1 len:2439
[0152][maz_split] [0363] type:1 len:1137
[0152][maz_split] [0364] type:0 len:768
[0152][maz_split] [0365] type:1 len:1185
[0152][maz_split] [0366] type:1 len:1458
[0152][maz_split] [0367] type:1 len:1377
[0152][maz_split] [0368] type:0 len:768
[0152][maz_split] [0369] type:1 len:1693
[0152][maz_split] [0370] type:1 len:587
[0152][maz_split] [0371] type:1 len:28
[0152][maz_split] [0372] type:0 len:768
[0152][maz_split] [0373] type:1 len:45
[0152][maz_split] [0374] type:1 len:11
[0152][maz_split] [0375] type:1 len:10495
[0152][maz_split] [0376] type:0 len:768
[0152][maz_split] [0377] type:1 len:1871
[0152][maz_split] [0378] type:1 len:1657
[0152][maz_split] [0379] type:1 len:1770
[0152][maz_split] [0380] type:0 len:768
[0152][maz_split] [0381] type:1 len:949
[0152][maz_split] [0382] type:1 len:775
[0152][maz_split] [0383] type:1 len:1518
[0152][maz_split] [0384] type:0 len:768
[0152][maz_split] [0385] type:1 len:1365
[0152][maz_split] [0386] type:1 len:2195
[0152][maz_split] [0387] type:1 len:1509
[0152][maz_split] [0388] type:0 len:768
[0152][maz_split] [0389] type:1 len:1389
[0152][maz_split] [0390] type:1 len:1364
[0152][maz_split] [0391] type:1 len:2398
[0152][maz_split] [0392] type:0 len:768
[0152][maz_split] [0393] type:1 len:1255
[0152][maz_split] [0394] type:1 len:1851
[0152][maz_split] [0395] type:1 len:1485
[0152][maz_split] [0396] type:1 len:1402
[0152][maz_split] [0397] type:0 len:768
[0152][maz_split] [0398] type:1 len:1092
[0152][maz_split] [0399] type:1 len:2508
[0152][maz_split] [0400] type:1 len:1224
[0152][maz_split] [0401] type:0 len:768
[0152][maz_split] [0402] type:1 len:988
[0152][maz_split] [0403] type:1 len:2179
[0152][maz_split] [0404] type:1 len:2088
[0152][maz_split] [0405] type:0 len:768
[0152][maz_split] [0406] type:1 len:1288
[0152][maz_split] [0407] type:1 len:1807
[0152][maz_split] [0408] type:1 len:28
[0152][maz_split] [0409] type:0 len:768
[0152][maz_split] [0410] type:1 len:45
[0152][maz_split] [0411] type:1 len:11
[0152][maz_split] [0412] type:1 len:18863
[0152][maz_split] [0413] type:0 len:768
[0152][maz_split] [0414] type:1 len:2302
[0152][maz_split] [0415] type:1 len:1218
[0152][maz_split] [0416] type:1 len:1824
[0152][maz_split] [0417] type:0 len:768
[0152][maz_split] [0418] type:1 len:992
[0152][maz_split] [0419] type:1 len:1582
[0152][maz_split] [0420] type:1 len:1723
[0152][maz_split] [0421] type:0 len:768
[0152][maz_split] [0422] type:1 len:1513
[0152][maz_split] [0423] type:1 len:2020
[0152][maz_split] [0424] type:1 len:1636
[0152][maz_split] [0425] type:0 len:768
[0152][maz_split] [0426] type:1 len:1590
[0152][maz_split] [0427] type:1 len:1528
[0152][maz_split] [0428] type:1 len:1453
[0152][maz_split] [0429] type:1 len:1408
[0152][maz_split] [0430] type:0 len:768
[0152][maz_split] [0431] type:1 len:1207
[0152][maz_split] [0432] type:1 len:1113
[0152][maz_split] [0433] type:1 len:2407
[0152][maz_split] [0434] type:0 len:768
[0152][maz_split] [0435] type:1 len:1406
[0152][maz_split] [0436] type:1 len:1257
[0152][maz_split] [0437] type:1 len:1380
[0152][maz_split] [0438] type:0 len:768
[0152][maz_split] [0439] type:1 len:1133
[0152][maz_split] [0440] type:1 len:1060
[0152][maz_split] [0441] type:1 len:2276
[0152][maz_split] [0442] type:0 len:768
[0152][maz_split] [0443] type:1 len:1356
[0152][maz_split] [0444] type:1 len:1074
[0152][maz_split] [0445] type:1 len:28
[0152][maz_split] [0446] type:0 len:768
[0152][maz_split] [0447] type:1 len:45
[0152][maz_split] [0448] type:1 len:11
[0152][maz_split] [0449] type:1 len:21299
[0152][maz_split] [0450] type:0 len:768
[0152][maz_split] [0451] type:1 len:3046
[0152][maz_split] [0452] type:1 len:1006
[0152][maz_split] [0453] type:1 len:1511
[0152][maz_split] [0454] type:0 len:768
[0152][maz_split] [0455] type:1 len:1495
[0152][maz_split] [0456] type:1 len:1359
paul@vmware:~/gitee/mp4v2/mp4v2-h265-study/examples/av265$ 
```

## 成果

在当前目录下输出 a.aac v.264 x264.mp4 文件。